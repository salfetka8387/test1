{
  "name": "claude 3 test",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "id": "e5e7bcf0-83e1-4218-b7f6-b91a512fef4d",
      "name": "Telegram Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1,
      "position": [
        -2140,
        -120
      ],
      "webhookId": "8efa796d-f5ff-4639-ae9e-43317a77f8b0",
      "credentials": {
        "telegramApi": {
          "id": "g2gl9dmaFdGU3EXW",
          "name": "Theodore HR Bot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.message.text }}",
              "operation": "contains",
              "value2": "/start"
            }
          ]
        }
      },
      "id": "a6fced91-e686-4a70-a1c6-86755166ee2a",
      "name": "Is Start Command",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -1920,
        -120
      ]
    },
    {
      "parameters": {
        "operation": "get",
        "key": "user_{{ $json.message.from.id }}_state",
        "options": {}
      },
      "id": "6237bbdd-85a6-44f8-902c-943a4414a2cc",
      "name": "Get User State",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -1700,
        -20
      ],
      "credentials": {
        "redis": {
          "id": "gccznUInhAMkeSSm",
          "name": "Redis account"
        }
      }
    },
    {
      "parameters": {
        "operation": "set",
        "key": "user_{{ $json.message.from.id }}_state",
        "value": "waiting_for_link"
      },
      "id": "99c1537f-2dd8-49dd-9b6a-c408d032fffe",
      "name": "Set Initial State",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -1700,
        -220
      ],
      "credentials": {
        "redis": {
          "id": "gccznUInhAMkeSSm",
          "name": "Redis account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.message.chat.id }}",
        "text": "üöÄ –ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É —Å–æ–∑–¥–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ –¥–ª—è –≤–∞–∫–∞–Ω—Å–∏–∏ —Å hh.ru\n\nüìã –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:\n1Ô∏è‚É£ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é\n2Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å –ø–∏—Å—å–º–∞\n3Ô∏è‚É£ –ü–æ–ª—É—á–∏—Ç–µ –≥–æ—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ\n\nüí° –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\nhttps://hh.ru/vacancy/12345678\n\n–ñ–¥—É –≤–∞—à—É —Å—Å—ã–ª–∫—É! üëá",
        "additionalFields": {}
      },
      "id": "3029ab29-8046-4724-8a3f-38be2abfe755",
      "name": "Send Welcome",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -1480,
        -220
      ],
      "webhookId": "ff54b964-776a-44f9-8a26-8ae9c852be22",
      "credentials": {
        "telegramApi": {
          "id": "g2gl9dmaFdGU3EXW",
          "name": "Theodore HR Bot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $node['Get User State'].json.value || 'waiting_for_link' }}",
              "value2": "waiting_for_link"
            }
          ]
        }
      },
      "id": "137bdb05-e2c1-4f10-855e-86a9b41e3bbf",
      "name": "Check State",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -1480,
        -20
      ]
    },
    {
      "parameters": {
        "jsCode": "// –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ hh.ru\nconst message = $input.all()[0].json.message.text;\nconst hhRegex = /https:\\/\\/(?:www\\.)?hh\\.ru\\/vacancy\\/(\\d+)/;\nconst match = message.match(hhRegex);\n\nif (match) {\n  return {\n    json: {\n      isValid: true,\n      vacancyId: match[1],\n      url: match[0],\n      chatId: $input.all()[0].json.message.chat.id,\n      userId: $input.all()[0].json.message.from.id\n    }\n  };\n} else {\n  return {\n    json: {\n      isValid: false,\n      chatId: $input.all()[0].json.message.chat.id,\n      userId: $input.all()[0].json.message.from.id,\n      message: message\n    }\n  };\n}"
      },
      "id": "0226031a-e092-48cb-86c9-b6765e879689",
      "name": "Validate HH Link",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1260,
        -120
      ]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.isValid }}",
              "value2": true
            }
          ]
        }
      },
      "id": "2d05b440-49e1-4083-af0c-9d3ee421d05b",
      "name": "Is Valid Link",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -1040,
        -120
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å—Å—ã–ª–∫–∏!\n\n‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:\nhttps://hh.ru/vacancy/12345678\n\nüìù –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫:\n‚Ä¢ https://hh.ru/vacancy/87654321\n‚Ä¢ https://www.hh.ru/vacancy/11111111\n\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ üëá",
        "additionalFields": {}
      },
      "id": "44928f6c-c796-4764-b2f0-f742aac1a7a8",
      "name": "Send Link Error",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -820,
        -20
      ],
      "webhookId": "d9cfc796-25e5-4010-926e-531c33cd3dcc",
      "credentials": {
        "telegramApi": {
          "id": "g2gl9dmaFdGU3EXW",
          "name": "Theodore HR Bot"
        }
      }
    },
    {
      "parameters": {
        "url": "https://api.hh.ru/vacancies/{{ $json.vacancyId }}",
        "options": {}
      },
      "id": "ea3f2bb5-f77d-44fd-baad-f14def404b6f",
      "name": "Get Vacancy Data",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [
        -820,
        -480
      ]
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $statusCode }}",
              "value2": 200
            }
          ]
        }
      },
      "id": "08975691-2c08-4794-bfc8-0572daa83b32",
      "name": "Check API Response",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -600,
        -480
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $('Validate HH Link').item.json.chatId }}",
        "text": "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –≤–∞–∫–∞–Ω—Å–∏–∏.\n\nüîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:\n‚Ä¢ –í–∞–∫–∞–Ω—Å–∏—è —É–¥–∞–ª–µ–Ω–∞ –∏–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞\n‚Ä¢ –ù–µ–≤–µ—Ä–Ω—ã–π ID –≤–∞–∫–∞–Ω—Å–∏–∏\n‚Ä¢ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å hh.ru\n\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥—É—é –≤–∞–∫–∞–Ω—Å–∏—é üëá",
        "additionalFields": {}
      },
      "id": "93c209b2-8630-4f43-9325-112397c23046",
      "name": "Send API Error",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -380,
        -340
      ],
      "webhookId": "45e7abcb-6a39-48df-a63a-70968044700b",
      "credentials": {
        "telegramApi": {
          "id": "g2gl9dmaFdGU3EXW",
          "name": "Theodore HR Bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "set",
        "key": "user_{{ $('Validate HH Link').item.json.userId }}_vacancy",
        "value": "={{ JSON.stringify($json) }}"
      },
      "id": "b603e226-e548-43b4-96b5-d6884205e8a1",
      "name": "Save Vacancy Data",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -380,
        -580
      ],
      "credentials": {
        "redis": {
          "id": "gccznUInhAMkeSSm",
          "name": "Redis account"
        }
      }
    },
    {
      "parameters": {
        "operation": "set",
        "key": "user_{{ $('Validate HH Link').item.json.userId }}_state",
        "value": "waiting_for_style"
      },
      "id": "013db171-d62c-4113-9c71-493a020d6705",
      "name": "Update State to Style",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -160,
        -580
      ],
      "credentials": {
        "redis": {
          "id": "gccznUInhAMkeSSm",
          "name": "Redis account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Validate HH Link').item.json.chatId }}",
        "text": "‚úÖ –í–∞–∫–∞–Ω—Å–∏—è –Ω–∞–π–¥–µ–Ω–∞: {{ $('Get Vacancy Data').item.json.name }}\nüè¢ –ö–æ–º–ø–∞–Ω–∏—è: {{ $('Get Vacancy Data').item.json.employer.name }}\n\nüìù –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–∏—Å—å–º–∞:\n\n1Ô∏è‚É£ **–°—Ç—Ä–æ–≥–∏–π** - —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π, –¥–µ–ª–æ–≤–æ–π —Ç–æ–Ω\n2Ô∏è‚É£ **–ü—Ä–æ–¥–∞—é—â–∏–π** - –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ –≤—ã–≥–æ–¥—ã\n3Ô∏è‚É£ **–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π** - –∂–∏–≤–æ–π, —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥\n\n–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ü–∏—Ñ—Ä—É (1, 2 –∏–ª–∏ 3) –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∏–ª—è üëá",
        "additionalFields": {}
      },
      "id": "f2b7c93f-6f62-4276-ac95-fb4a1c73f9f5",
      "name": "Send Style Options",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        60,
        -580
      ],
      "webhookId": "28cfa8f0-2ef8-4e94-bf76-332da478dfc3",
      "credentials": {
        "telegramApi": {
          "id": "g2gl9dmaFdGU3EXW",
          "name": "Theodore HR Bot"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $node['Get User State'].json.value }}",
              "value2": "waiting_for_style"
            }
          ]
        }
      },
      "id": "272f7220-4779-41a7-b843-4f7f4899e2ab",
      "name": "Check Style State",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -1240,
        280
      ]
    },
    {
      "parameters": {
        "jsCode": "// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∏–ª—è –ø–∏—Å—å–º–∞\nconst message = $input.all()[0].json.message.text.toLowerCase().trim();\nconst userId = $input.all()[0].json.message.from.id;\nconst chatId = $input.all()[0].json.message.chat.id;\n\nlet style = null;\nlet styleName = '';\n\n// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —Ü–∏—Ñ—Ä–µ –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é\nif (message === '1' || message.includes('—Å—Ç—Ä–æ–≥')) {\n  style = 'strict';\n  styleName = '–°—Ç—Ä–æ–≥–∏–π';\n} else if (message === '2' || message.includes('–ø—Ä–æ–¥–∞—é') || message.includes('–ø—Ä–æ–¥–∞—é—â')) {\n  style = 'selling';\n  styleName = '–ü—Ä–æ–¥–∞—é—â–∏–π';\n} else if (message === '3' || message.includes('–∫—Ä–µ–∞—Ç–∏–≤') || message.includes('—Ç–≤–æ—Ä—á')) {\n  style = 'creative';\n  styleName = '–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π';\n}\n\nreturn {\n  json: {\n    style: style,\n    styleName: styleName,\n    userId: userId,\n    chatId: chatId,\n    isValid: style !== null\n  }\n};"
      },
      "id": "e3ae4c71-d643-42a8-a34a-2dfe83c9dac8",
      "name": "Parse Style Choice",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1020,
        280
      ]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.isValid }}",
              "value2": true
            }
          ]
        }
      },
      "id": "f6c9b440-35eb-4742-a65f-8d60e6b13b09",
      "name": "Is Valid Style",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -800,
        280
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä —Å—Ç–∏–ª—è!\n\n‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:\n1Ô∏è‚É£ –°—Ç—Ä–æ–≥–∏–π\n2Ô∏è‚É£ –ü—Ä–æ–¥–∞—é—â–∏–π\n3Ô∏è‚É£ –ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π\n\n–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ü–∏—Ñ—Ä—É (1, 2 –∏–ª–∏ 3) –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∏–ª—è üëá",
        "additionalFields": {}
      },
      "id": "03412420-e725-4430-b2ff-74c31de461fd",
      "name": "Send Style Error",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -580,
        380
      ],
      "webhookId": "f11f4383-c3ea-474a-9df0-5a7b67937bbd",
      "credentials": {
        "telegramApi": {
          "id": "g2gl9dmaFdGU3EXW",
          "name": "Theodore HR Bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "get",
        "key": "user_{{ $json.userId }}_vacancy",
        "options": {}
      },
      "id": "d050cc1d-5ab8-452c-9fb0-bf636d73a226",
      "name": "Get Saved Vacancy",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -600,
        -20
      ],
      "credentials": {
        "redis": {
          "id": "gccznUInhAMkeSSm",
          "name": "Redis account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è LLM\nconst vacancyData = JSON.parse($node['Get Saved Vacancy'].json.value);\nconst style = $input.all()[0].json.style;\nconst styleName = $input.all()[0].json.styleName;\n\n// –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏\nconst styles = {\n  strict: \"–ù–∞–ø–∏—à–∏ —Å—Ç—Ä–æ–≥–æ–µ, —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ –≤ –¥–µ–ª–æ–≤–æ–º —Å—Ç–∏–ª–µ. –ò—Å–ø–æ–ª—å–∑—É–π –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ç–æ–Ω, –∏–∑–±–µ–≥–∞–π —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π.\",\n  selling: \"–ù–∞–ø–∏—à–∏ –ø—Ä–æ–¥–∞—é—â–µ–µ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, —Ü–∏—Ñ—Ä—ã –∏ –≤—ã–≥–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è. –ü–æ–∫–∞–∂–∏ —Ü–µ–Ω–Ω–æ—Å—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞.\",\n  creative: \"–ù–∞–ø–∏—à–∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ —Å –∂–∏–≤—ã–º, —Ç–≤–æ—Ä—á–µ—Å–∫–∏–º –ø–æ–¥—Ö–æ–¥–æ–º. –ò—Å–ø–æ–ª—å–∑—É–π –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏, –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º.\"\n};\n\n// –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞\nconst prompt = `${styles[style]}\n\n**–î–ê–ù–ù–´–ï –û –í–ê–ö–ê–ù–°–ò–ò:**\n–ù–∞–∑–≤–∞–Ω–∏–µ: ${vacancyData.name}\n–ö–æ–º–ø–∞–Ω–∏—è: ${vacancyData.employer.name}\n–û–ø–∏—Å–∞–Ω–∏–µ: ${vacancyData.description || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\n–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: ${vacancyData.key_skills ? vacancyData.key_skills.map(skill => skill.name).join(', ') : '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}\n–ó–∞—Ä–ø–ª–∞—Ç–∞: ${vacancyData.salary ? `${vacancyData.salary.from || ''}-${vacancyData.salary.to || ''} ${vacancyData.salary.currency}` : '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}\n\n**–¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –ü–ò–°–¨–ú–£:**\n- –î–ª–∏–Ω–∞: 150-250 —Å–ª–æ–≤\n- –°—Ç—Ä—É–∫—Ç—É—Ä–∞: –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ, –º–æ—Ç–∏–≤–∞—Ü–∏—è, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º, –∑–∞–∫–ª—é—á–µ–Ω–∏–µ\n- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–∞–∫–∞–Ω—Å–∏—é –∏ –∫–æ–º–ø–∞–Ω–∏—é\n- –ë–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ –ø–æ–¥–ø–∏—Å–∏\n- –ì–æ—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è`;\n\nreturn {\n  json: {\n    prompt: prompt,\n    style: style,\n    styleName: styleName,\n    vacancyName: vacancyData.name,\n    companyName: vacancyData.employer.name,\n    userId: $input.all()[0].json.userId,\n    chatId: $input.all()[0].json.chatId\n  }\n};"
      },
      "id": "ebb129d8-b14b-4c73-89a7-7c41c91e48e1",
      "name": "Create LLM Prompt",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -380,
        -40
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "‚è≥ –ì–µ–Ω–µ—Ä–∏—Ä—É—é —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ...\n\nüìù –°—Ç–∏–ª—å: {{ $json.styleName }}\nüè¢ –í–∞–∫–∞–Ω—Å–∏—è: {{ $json.vacancyName }}\n\n–ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ ‚è∞",
        "additionalFields": {}
      },
      "id": "0df8c0e6-5018-4c89-bcea-93b0f2c5d335",
      "name": "Send Processing Message",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -160,
        -20
      ],
      "webhookId": "29564332-7249-431b-8a35-083f6ca2775d",
      "credentials": {
        "telegramApi": {
          "id": "g2gl9dmaFdGU3EXW",
          "name": "Theodore HR Bot"
        }
      }
    },
    {
      "parameters": {
        "operation": "set",
        "key": "user_{{ $('Create LLM Prompt').item.json.userId }}_state",
        "value": "waiting_for_link"
      },
      "id": "09c152c0-9ce6-4834-9014-c73c094d1142",
      "name": "Reset State",
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        280,
        -20
      ],
      "credentials": {
        "redis": {
          "id": "gccznUInhAMkeSSm",
          "name": "Redis account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Create LLM Prompt').item.json.chatId }}",
        "text": "‚úÖ **–ì–æ—Ç–æ–≤–æ! –í–∞—à–µ —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ:**\n\n{{ $json.choices[0].message.content }}\n\n---\n\nüîÑ –•–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å –ø–∏—Å—å–º–æ –¥–ª—è –¥—Ä—É–≥–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏? –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É –Ω–∞ hh.ru\n\nüí° –ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ /start –¥–ª—è –ø–æ–≤—Ç–æ—Ä–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π",
        "additionalFields": {}
      },
      "id": "cf217b4c-d1dd-4f45-a169-9f2ac1227415",
      "name": "Send Final Result",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        500,
        -20
      ],
      "webhookId": "4e5e7454-76f5-4cae-8776-eba95288c67d",
      "credentials": {
        "telegramApi": {
          "id": "g2gl9dmaFdGU3EXW",
          "name": "Theodore HR Bot"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $json.message.chat.id }}",
        "text": "‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.\n\nüîÑ –ù–∞—á–Ω–∏—Ç–µ –∑–∞–Ω–æ–≤–æ —Å –∫–æ–º–∞–Ω–¥—ã /start\n\n–ò–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é —Å hh.ru üëá",
        "additionalFields": {}
      },
      "id": "892d35f9-a6ec-4abd-8213-93e113cf0662",
      "name": "Send Unknown Command",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -1240,
        580
      ],
      "webhookId": "d80ba29c-500a-4be8-bab7-f288814a2d4d",
      "credentials": {
        "telegramApi": {
          "id": "g2gl9dmaFdGU3EXW",
          "name": "Theodore HR Bot"
        }
      }
    },
    {
      "parameters": {
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -20,
        180
      ],
      "id": "0319ffec-7189-4292-8d82-c55169d47f9f",
      "name": "Basic LLM Chain"
    },
    {
      "parameters": {
        "model": "deepseek/deepseek-chat-v3-0324:free",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        340,
        400
      ],
      "id": "cbbc19ba-ab41-413b-b14a-b5aa2c12c854",
      "name": "OpenRouter Chat Model",
      "credentials": {
        "openRouterApi": {
          "id": "ShbxHoKgzX0F55nP",
          "name": "OpenRouter account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Is Start Command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Is Start Command": {
      "main": [
        [
          {
            "node": "Set Initial State",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get User State",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get User State": {
      "main": [
        [
          {
            "node": "Check State",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Initial State": {
      "main": [
        [
          {
            "node": "Send Welcome",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check State": {
      "main": [
        [
          {
            "node": "Validate HH Link",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Check Style State",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validate HH Link": {
      "main": [
        [
          {
            "node": "Is Valid Link",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Is Valid Link": {
      "main": [
        [
          {
            "node": "Get Vacancy Data",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Link Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Vacancy Data": {
      "main": [
        [
          {
            "node": "Check API Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check API Response": {
      "main": [
        [
          {
            "node": "Save Vacancy Data",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send API Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save Vacancy Data": {
      "main": [
        [
          {
            "node": "Update State to Style",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update State to Style": {
      "main": [
        [
          {
            "node": "Send Style Options",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Style State": {
      "main": [
        [
          {
            "node": "Parse Style Choice",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Unknown Command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse Style Choice": {
      "main": [
        [
          {
            "node": "Is Valid Style",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Is Valid Style": {
      "main": [
        [
          {
            "node": "Get Saved Vacancy",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Style Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Saved Vacancy": {
      "main": [
        [
          {
            "node": "Create LLM Prompt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create LLM Prompt": {
      "main": [
        [
          {
            "node": "Send Processing Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Reset State": {
      "main": [
        [
          {
            "node": "Send Final Result",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Send Processing Message": {
      "main": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain": {
      "main": [
        [
          {
            "node": "Reset State",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "aea8977c-ed5c-442f-a9cd-2f3b4779d506",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "a1dc4771e374368681e2c1035478ddee8abe3fbe69d72e8ac7541e05cb8b780f"
  },
  "id": "tJ0JkjILz2CLhyIU",
  "tags": []
}